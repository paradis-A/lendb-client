var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,r=function(t,e){var r="000000000"+t;return r.substr(r.length-e)},n=r,i="object"==typeof window?window:self,o=Object.keys(i).length,s=n(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+o.toString(36),4),a="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(a){var c=Math.pow(2,32)-1;e=function(){return Math.abs(a.getRandomValues(new Uint32Array(1))[0]/c)}}else e=Math.random;var u=function(){return s},h=r,l=e,f=0,p=Math.pow(36,4);function d(){return h((l()*p<<0).toString(36),4)}function y(){return f=f<p?f:0,++f-1}function v(){return"c"+(new Date).getTime().toString(36)+h(y().toString(36),4)+u()+(d()+d())}v.slug=function(){var t=(new Date).getTime().toString(36),e=y().toString(36).slice(-4),r=u().slice(0,1)+u().slice(-1),n=d().slice(-2);return t.slice(-2)+e+r+n},v.isCuid=function(t){return"string"==typeof t&&!!t.startsWith("c")},v.isSlug=function(t){if("string"!=typeof t)return!1;var e=t.length;return e>=7&&e<=10},v.fingerprint=u;var g=v;var _=function(){this.__data__=[],this.size=0};var b=function(t,e){return t===e||t!=t&&e!=e},w=b;var m=function(t,e){for(var r=t.length;r--;)if(w(t[r][0],e))return r;return-1},x=m,S=Array.prototype.splice;var j=m;var k=m;var B=m;var A=_,E=function(t){var e=this.__data__,r=x(e,t);return!(r<0)&&(r==e.length-1?e.pop():S.call(e,r,1),--this.size,!0)},O=function(t){var e=this.__data__,r=j(e,t);return r<0?void 0:e[r][1]},C=function(t){return k(this.__data__,t)>-1},D=function(t,e){var r=this.__data__,n=B(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function P(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}P.prototype.clear=A,P.prototype.delete=E,P.prototype.get=O,P.prototype.has=C,P.prototype.set=D;var R=P,z=R;var H=function(){this.__data__=new z,this.size=0};var T=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var U=function(t){return this.__data__.get(t)};var M=function(t){return this.__data__.has(t)},I="object"==typeof t&&t&&t.Object===Object&&t,F=I,N="object"==typeof self&&self&&self.Object===Object&&self,L=F||N||Function("return this")(),q=L.Symbol,W=q,K=Object.prototype,$=K.hasOwnProperty,J=K.toString,X=W?W.toStringTag:void 0;var V=function(t){var e=$.call(t,X),r=t[X];try{t[X]=void 0;var n=!0}catch(t){}var i=J.call(t);return n&&(e?t[X]=r:delete t[X]),i},G=Object.prototype.toString;var Z=V,Q=function(t){return G.call(t)},Y=q?q.toStringTag:void 0;var tt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Y&&Y in Object(t)?Z(t):Q(t)};var et=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},rt=tt,nt=et;var it,ot=function(t){if(!nt(t))return!1;var e=rt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},st=L["__core-js_shared__"],at=(it=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||""))?"Symbol(src)_1."+it:"";var ct=function(t){return!!at&&at in t},ut=Function.prototype.toString;var ht=function(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""},lt=ot,ft=ct,pt=et,dt=ht,yt=/^\[object .+?Constructor\]$/,vt=Function.prototype,gt=Object.prototype,_t=vt.toString,bt=gt.hasOwnProperty,wt=RegExp("^"+_t.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var mt=function(t){return!(!pt(t)||ft(t))&&(lt(t)?wt:yt).test(dt(t))},xt=function(t,e){return null==t?void 0:t[e]};var St=function(t,e){var r=xt(t,e);return mt(r)?r:void 0},jt=St(L,"Map"),kt=St(Object,"create"),Bt=kt;var At=function(){this.__data__=Bt?Bt(null):{},this.size=0};var Et=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ot=kt,Ct=Object.prototype.hasOwnProperty;var Dt=function(t){var e=this.__data__;if(Ot){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ct.call(e,t)?e[t]:void 0},Pt=kt,Rt=Object.prototype.hasOwnProperty;var zt=kt;var Ht=At,Tt=Et,Ut=Dt,Mt=function(t){var e=this.__data__;return Pt?void 0!==e[t]:Rt.call(e,t)},It=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=zt&&void 0===e?"__lodash_hash_undefined__":e,this};function Ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ft.prototype.clear=Ht,Ft.prototype.delete=Tt,Ft.prototype.get=Ut,Ft.prototype.has=Mt,Ft.prototype.set=It;var Nt=Ft,Lt=R,qt=jt;var Wt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Kt=function(t,e){var r=t.__data__;return Wt(e)?r["string"==typeof e?"string":"hash"]:r.map},$t=Kt;var Jt=Kt;var Xt=Kt;var Vt=Kt;var Gt=function(){this.size=0,this.__data__={hash:new Nt,map:new(qt||Lt),string:new Nt}},Zt=function(t){var e=$t(this,t).delete(t);return this.size-=e?1:0,e},Qt=function(t){return Jt(this,t).get(t)},Yt=function(t){return Xt(this,t).has(t)},te=function(t,e){var r=Vt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ee(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ee.prototype.clear=Gt,ee.prototype.delete=Zt,ee.prototype.get=Qt,ee.prototype.has=Yt,ee.prototype.set=te;var re=ee,ne=R,ie=jt,oe=re;var se=R,ae=H,ce=T,ue=U,he=M,le=function(t,e){var r=this.__data__;if(r instanceof ne){var n=r.__data__;if(!ie||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new oe(n)}return r.set(t,e),this.size=r.size,this};function fe(t){var e=this.__data__=new se(t);this.size=e.size}fe.prototype.clear=ae,fe.prototype.delete=ce,fe.prototype.get=ue,fe.prototype.has=he,fe.prototype.set=le;var pe=fe;var de=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},ye=St,ve=function(){try{var t=ye(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ge=function(t,e,r){"__proto__"==e&&ve?ve(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},_e=ge,be=b,we=Object.prototype.hasOwnProperty;var me=function(t,e,r){var n=t[e];we.call(t,e)&&be(n,r)&&(void 0!==r||e in t)||_e(t,e,r)},xe=me,Se=ge;var je=function(t,e,r,n){var i=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),i?Se(r,a,c):xe(r,a,c)}return r};var ke=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Be=function(t){return null!=t&&"object"==typeof t},Ae=tt,Ee=Be;var Oe=function(t){return Ee(t)&&"[object Arguments]"==Ae(t)},Ce=Be,De=Object.prototype,Pe=De.hasOwnProperty,Re=De.propertyIsEnumerable,ze=Oe(function(){return arguments}())?Oe:function(t){return Ce(t)&&Pe.call(t,"callee")&&!Re.call(t,"callee")},He=Array.isArray,Te={exports:{}};var Ue=function(){return!1};!function(t,e){var r=L,n=Ue,i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=(s?s.isBuffer:void 0)||n;t.exports=a}(Te,Te.exports);var Me=/^(?:0|[1-9]\d*)$/;var Ie=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Me.test(t))&&t>-1&&t%1==0&&t<e};var Fe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Ne=tt,Le=Fe,qe=Be,We={};We["[object Float32Array]"]=We["[object Float64Array]"]=We["[object Int8Array]"]=We["[object Int16Array]"]=We["[object Int32Array]"]=We["[object Uint8Array]"]=We["[object Uint8ClampedArray]"]=We["[object Uint16Array]"]=We["[object Uint32Array]"]=!0,We["[object Arguments]"]=We["[object Array]"]=We["[object ArrayBuffer]"]=We["[object Boolean]"]=We["[object DataView]"]=We["[object Date]"]=We["[object Error]"]=We["[object Function]"]=We["[object Map]"]=We["[object Number]"]=We["[object Object]"]=We["[object RegExp]"]=We["[object Set]"]=We["[object String]"]=We["[object WeakMap]"]=!1;var Ke=function(t){return qe(t)&&Le(t.length)&&!!We[Ne(t)]};var $e=function(t){return function(e){return t(e)}},Je={exports:{}};!function(t,e){var r=I,n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,o=i&&i.exports===n&&r.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}(Je,Je.exports);var Xe=Ke,Ve=$e,Ge=Je.exports,Ze=Ge&&Ge.isTypedArray,Qe=Ze?Ve(Ze):Xe,Ye=ke,tr=ze,er=He,rr=Te.exports,nr=Ie,ir=Qe,or=Object.prototype.hasOwnProperty;var sr=function(t,e){var r=er(t),n=!r&&tr(t),i=!r&&!n&&rr(t),o=!r&&!n&&!i&&ir(t),s=r||n||i||o,a=s?Ye(t.length,String):[],c=a.length;for(var u in t)!e&&!or.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||nr(u,c))||a.push(u);return a},ar=Object.prototype;var cr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ar)};var ur=function(t,e){return function(r){return t(e(r))}},hr=ur(Object.keys,Object),lr=cr,fr=hr,pr=Object.prototype.hasOwnProperty;var dr=ot,yr=Fe;var vr=function(t){return null!=t&&yr(t.length)&&!dr(t)},gr=sr,_r=function(t){if(!lr(t))return fr(t);var e=[];for(var r in Object(t))pr.call(t,r)&&"constructor"!=r&&e.push(r);return e},br=vr;var wr=function(t){return br(t)?gr(t):_r(t)},mr=je,xr=wr;var Sr=function(t,e){return t&&mr(e,xr(e),t)};var jr=et,kr=cr,Br=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Ar=Object.prototype.hasOwnProperty;var Er=sr,Or=function(t){if(!jr(t))return Br(t);var e=kr(t),r=[];for(var n in t)("constructor"!=n||!e&&Ar.call(t,n))&&r.push(n);return r},Cr=vr;var Dr=function(t){return Cr(t)?Er(t,!0):Or(t)},Pr=je,Rr=Dr;var zr=function(t,e){return t&&Pr(e,Rr(e),t)},Hr={exports:{}};!function(t,e){var r=L,n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,o=i&&i.exports===n?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}}(Hr,Hr.exports);var Tr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Ur=function(){return[]},Mr=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o},Ir=Ur,Fr=Object.prototype.propertyIsEnumerable,Nr=Object.getOwnPropertySymbols,Lr=Nr?function(t){return null==t?[]:(t=Object(t),Mr(Nr(t),(function(e){return Fr.call(t,e)})))}:Ir,qr=je,Wr=Lr;var Kr=function(t,e){return qr(t,Wr(t),e)};var $r=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},Jr=ur(Object.getPrototypeOf,Object),Xr=$r,Vr=Jr,Gr=Lr,Zr=Ur,Qr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Xr(e,Gr(t)),t=Vr(t);return e}:Zr,Yr=je,tn=Qr;var en=function(t,e){return Yr(t,tn(t),e)},rn=$r,nn=He;var on=function(t,e,r){var n=e(t);return nn(t)?n:rn(n,r(t))},sn=on,an=Lr,cn=wr;var un=function(t){return sn(t,cn,an)},hn=on,ln=Qr,fn=Dr;var pn=function(t){return hn(t,fn,ln)},dn=St(L,"DataView"),yn=jt,vn=St(L,"Promise"),gn=St(L,"Set"),_n=St(L,"WeakMap"),bn=tt,wn=ht,mn=wn(dn),xn=wn(yn),Sn=wn(vn),jn=wn(gn),kn=wn(_n),Bn=bn;(dn&&"[object DataView]"!=Bn(new dn(new ArrayBuffer(1)))||yn&&"[object Map]"!=Bn(new yn)||vn&&"[object Promise]"!=Bn(vn.resolve())||gn&&"[object Set]"!=Bn(new gn)||_n&&"[object WeakMap]"!=Bn(new _n))&&(Bn=function(t){var e=bn(t),r="[object Object]"==e?t.constructor:void 0,n=r?wn(r):"";if(n)switch(n){case mn:return"[object DataView]";case xn:return"[object Map]";case Sn:return"[object Promise]";case jn:return"[object Set]";case kn:return"[object WeakMap]"}return e});var An=Bn,En=Object.prototype.hasOwnProperty;var On=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&En.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Cn=L.Uint8Array,Dn=Cn;var Pn=function(t){var e=new t.constructor(t.byteLength);return new Dn(e).set(new Dn(t)),e},Rn=Pn;var zn=function(t,e){var r=e?Rn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Hn=/\w*$/;var Tn=function(t){var e=new t.constructor(t.source,Hn.exec(t));return e.lastIndex=t.lastIndex,e},Un=q?q.prototype:void 0,Mn=Un?Un.valueOf:void 0;var In=Pn;var Fn=Pn,Nn=zn,Ln=Tn,qn=function(t){return Mn?Object(Mn.call(t)):{}},Wn=function(t,e){var r=e?In(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Kn=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return Fn(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Nn(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wn(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ln(t);case"[object Symbol]":return qn(t)}},$n=et,Jn=Object.create,Xn=function(){function t(){}return function(e){if(!$n(e))return{};if(Jn)return Jn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Vn=Jr,Gn=cr;var Zn=function(t){return"function"!=typeof t.constructor||Gn(t)?{}:Xn(Vn(t))},Qn=An,Yn=Be;var ti=function(t){return Yn(t)&&"[object Map]"==Qn(t)},ei=$e,ri=Je.exports,ni=ri&&ri.isMap,ii=ni?ei(ni):ti,oi=An,si=Be;var ai=function(t){return si(t)&&"[object Set]"==oi(t)},ci=$e,ui=Je.exports,hi=ui&&ui.isSet,li=hi?ci(hi):ai,fi=pe,pi=de,di=me,yi=Sr,vi=zr,gi=Hr.exports,_i=Tr,bi=Kr,wi=en,mi=un,xi=pn,Si=An,ji=On,ki=Kn,Bi=Zn,Ai=He,Ei=Te.exports,Oi=ii,Ci=et,Di=li,Pi=wr,Ri=Dr,zi={};zi["[object Arguments]"]=zi["[object Array]"]=zi["[object ArrayBuffer]"]=zi["[object DataView]"]=zi["[object Boolean]"]=zi["[object Date]"]=zi["[object Float32Array]"]=zi["[object Float64Array]"]=zi["[object Int8Array]"]=zi["[object Int16Array]"]=zi["[object Int32Array]"]=zi["[object Map]"]=zi["[object Number]"]=zi["[object Object]"]=zi["[object RegExp]"]=zi["[object Set]"]=zi["[object String]"]=zi["[object Symbol]"]=zi["[object Uint8Array]"]=zi["[object Uint8ClampedArray]"]=zi["[object Uint16Array]"]=zi["[object Uint32Array]"]=!0,zi["[object Error]"]=zi["[object Function]"]=zi["[object WeakMap]"]=!1;var Hi=function t(e,r,n,i,o,s){var a,c=1&r,u=2&r,h=4&r;if(n&&(a=o?n(e,i,o,s):n(e)),void 0!==a)return a;if(!Ci(e))return e;var l=Ai(e);if(l){if(a=ji(e),!c)return _i(e,a)}else{var f=Si(e),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Ei(e))return gi(e,c);if("[object Object]"==f||"[object Arguments]"==f||p&&!o){if(a=u||p?{}:Bi(e),!c)return u?wi(e,vi(a,e)):bi(e,yi(a,e))}else{if(!zi[f])return o?e:{};a=ki(e,f,c)}}s||(s=new fi);var d=s.get(e);if(d)return d;s.set(e,a),Di(e)?e.forEach((function(i){a.add(t(i,r,n,i,e,s))})):Oi(e)&&e.forEach((function(i,o){a.set(o,t(i,r,n,o,e,s))}));var y=l?void 0:(h?u?xi:mi:u?Ri:Pi)(e);return pi(y||e,(function(i,o){y&&(i=e[o=i]),di(a,o,t(i,r,n,o,e,s))})),a},Ti=Hi;var Ui=function(t){return Ti(t,5)},Mi=tt,Ii=Be;var Fi=function(t){return Ii(t)&&"[object Date]"==Mi(t)},Ni=$e,Li=Je.exports,qi=Li&&Li.isDate,Wi=qi?Ni(qi):Fi;function Ki(t){let e={};if(et(t)){let r=Object.entries(t);for(const t of r){const r=t[0],n=t[1];if(et(n)&&!Wi(n)){let t={};t=Object.keys(n).every((t=>g.isCuid(t)))?Object.values(n).map((t=>Ki(t))):n,e[r]=t}else e[r]=n}}return e}class $i{http;key;operation;ref;loadedRawData;childProps;singular=!1;eventHandles={hook:!0,emit:!0};httpSettings;emitter;constructor(t,e=!1,r,n){this.operation="save",this.key=g(),"string"==typeof e&&g.isCuid(e)?this.key=e:"boolean"==typeof e&&e&&(this.singular=e,this.key=null),this.http=r,this.emitter=n,this.ref=t;const i=localStorage.getItem("lenDB");this.httpSettings=JSON.parse(i)}async destroy(){try{let t={key:this.key,ref:this.ref,operation:"destroy",singular:this.singular},e=this.http.post("lenDB",{body:JSON.stringify(t)}).json();return Promise.resolve(e)}catch(t){return Promise.reject(t)}}getOperation(){return this.operation}parse(){try{if(this.ref.includes("*"))return Promise.reject("Error: Adding or Updating must not contain wildcard path.");let t={};if("save"==this.operation?t=this.stripNonData(Object.assign({},this)):"destroy"==this.operation&&(t=Object.assign({},{operation:t?.operation,ref:t.ref,key:t?.key,singular:t?.singular})),!t.key&&0==t.singular)throw new Error("Error: Non-singular must contain key.");return t}catch(t){throw new Error(t)}}clear(){let t=this.toObject();Object.entries(t).forEach((t=>{delete this[t[0]]})),this.operation="save"}async commit(){try{const t=this.parse();let e=await this.http.post("lenDB",{body:JSON.stringify(t)}).json();return"destroy"==this.operation&&(this.clear(),this.key=g()),Promise.resolve(e)}catch(t){return Promise.reject(t)}}stripNonData(t){return delete t.childProps,delete t.loadedRawData,delete t.httpSettings,delete t.emitter,t}async load(){try{let t={operation:"load",key:this.key,ref:this.ref,singular:this.singular},e=await this.http.post("lenDB",{body:JSON.stringify(t)}).json();return console.log("load result",e),e?Promise.resolve(Ki(e)):Promise.resolve({key:this.key})}catch(t){return Promise.reject(t)}}assign(t){let e=Ui(t);if(delete e.childProps,delete e.eventHandles,delete e.loadedRawData,delete e.singular,delete e.ref,delete e.serializer,delete e.singular,Object.assign(this,e),e.key&&!g.isCuid(e.key))throw new Error("Invalid key");return delete e.key,this}child(t){if(this.singular)throw new Error("Error: Singular cannot have child collection");let e=Ui(this);return e.clear(),e.ref=`${this.ref}/${this.key}/${t}`,e.operation="save",e.key=g(),e}clone(){return Ui(this)}toObject(){let t=Ui(this);return delete t.childProps,delete t.eventHandles,delete t.loadedRawData,delete t.singular,delete t.ref,delete t.operation,delete t.httpSettings,t}toDestroy(t=!0){return this.operation=t?"destroy":"save",this}}function Ji(){}function Xi(t,e){var r,n=0,i=1,o={},s=(e=e||{}).maxAttempts||1/0;return o.open=function(){(r=new WebSocket(t,e.protocols||[])).onmessage=e.onmessage||Ji,r.onopen=function(t){(e.onopen||Ji)(t),n=0},r.onclose=function(t){1e3===t.code||1001===t.code||1005===t.code||o.reconnect(t),(e.onclose||Ji)(t)},r.onerror=function(t){t&&"ECONNREFUSED"===t.code?o.reconnect(t):(e.onerror||Ji)(t)}},o.reconnect=function(t){i&&n++<s?i=setTimeout((function(){(e.onreconnect||Ji)(t),o.open()}),e.timeout||1e3):(e.onmaximum||Ji)(t)},o.json=function(t){r.send(JSON.stringify(t))},o.send=function(t){r.send(t)},o.close=function(t,e){i=clearTimeout(i),r.close(t||1e3,e)},o.open(),o}function Vi(){}Promise.resolve();const Gi=[];function Zi(t,e=Vi){let r;const n=new Set;function i(e){if(o=e,((i=t)!=i?o==o:i!==o||i&&"object"==typeof i||"function"==typeof i)&&(t=e,r)){const e=!Gi.length;for(const e of n)e[1](),Gi.push(e,t);if(e){for(let t=0;t<Gi.length;t+=2)Gi[t][0](Gi[t+1]);Gi.length=0}}var i,o}return{set:i,update:function(e){i(e(t))},subscribe:function(o,s=Vi){const a=[o,s];return n.add(a),1===n.size&&(r=e(i)||Vi),o(t),()=>{n.delete(a),0===n.size&&(r(),r=null)}}}}class Qi{filters={};sorts={};ref;listener;skip=0;limit=100;page=0;executing=!1;listening=!1;#t;#e;#r=[];#n=0;#i;queueBeforeResult=[];operation;exclusion=[];inclusion=[];emitter;hook;controller;signal;ws;searchString;http;wsUrl;constructor(t,e,r,n){this.ref=t,this.http=e,this.wsUrl=r,this.emitter=n,this.operation="query",this.#t=Zi([]),this.#e=Zi(0),this.#r=[],this.#n=0}get data(){return this.#t}get count(){return this.#e}like(t,e,r){let n="*"+e+"*";return"left"==r&&(n="*"+e),"right"==r&&(n=e+"*"),this.filters[t+"[like]"]=n,this}notLike(t,e,r){let n="*"+e+"*";return"left"==r&&(n="*"+e),"right"==r&&(n=e+"*"),this.filters[t+"[!like]"]=n,this}gt(t,e){return this.filters[t+"[>]"]=e,this}gte(t,e){return this.filters[t+"[>=]"]=e,this}between(t,e){return this.filters[t+"[between]"]=e,this}notBetween(t,e){return this.filters[t+"[!between]"]=e,this}lt(t,e){return this.filters[t+"[<]"]=e,this}lte(t,e){return this.filters[t+"[<=]"]=e,this}eq(t,e){return this.filters[t+"[==]"]=e,this}notEq(t,e){return this.filters[t+"[!=]"]=e,this}in(t,e){return this.filters[t+"[in]"]=e,this}notIn(t,e){return this.filters[t+"[!in]"]=e,this}matches(t,e){return this.filters[t+"[matches]"]=e,this}notMatches(t,e){return this.filters[t+"[!matches]"]=e,this}has(t,e){return this.filters[t+"[has]"]=e,this}notHas(t,e){return this.filters[t]["!has"]=e,this}contains(t,e){return this.filters[t].contains=e,this}notContains(t,e){return this.filters[t]["!contains"]=e,this}sort(t,e=!1){return this.sorts[t]=e?"ASC":"DESC",this}exclude(t){return this.exclusion=t,this}include(t){return this.inclusion=t,this}search(t){return this.searchString=t,this}stripNonQuery(t){return delete t.emitter,delete t.http,delete t.wsUrl,delete t.emitter,delete t.queueBeforeResult,delete t.ws,delete t.signal,delete t.listening,delete t.listener,delete t.emitter,t}on(t){let e=new Yi;t(e),this.listener=e}clearFilters(){this.filters={}}clearSorts(){this.sorts={}}toWildCardPath(t){return t.split("/").map((t=>g.isCuid(t)?"*":t)).join("/")}createWS(){let t={subscriptionKey:this.#i};this.ws=new Xi(this.wsUrl+"/lenDB",{timeout:5e3,maxAttempts:10,onopen:()=>{this.ws.send(JSON.stringify(t))},onreconnect:()=>{this.ws.send(JSON.stringify(t))},onmessage:t=>{let e=t.data;"string"==typeof t.data&&(e=JSON.parse(t.data)),"add"==e.type&&(this.listener.getEvent("add")&&this.listener.getEvent("add")(e?.data),e?.data.key&&e?.index>-1&&(e?.index+1>this.#r.length&&this.page>1||(this.limit==this.#r.length&&this.#r.pop(),this.#r=[e?.data,...this.#r],this.#n=e?.count||e.count,this.#e.set(e?.count),this.#t.set(this.#r),console.log(e)))),"update"==e.type&&(this.listener.getEvent("update")&&this.listener.getEvent("update")(e?.data),e?.data.key&&e?.index>-1&&(this.#r[e?.index]=e?.data,this.#n=e?.count||e.count,this.#e.set(this.#n),this.#t.set(this.#r))),"destroy"==e.type&&(this.listener.getEvent("destroy")&&this.listener.getEvent("destroy")(e?.data),e?.newData.length&&(this.#r[e?.index]=e?.newData,this.#n=e?.count||e.count,this.#e.set(this.#n),this.#t.set(this.#r)))}}),this.listening=!0}unsubscribe(){this.ws&&(this.#i=null,this.ws.close(1e3,"unsubscribe"))}async execute(t={live:!0}){try{if(this.ref.includes("__users__")||this.ref.includes("__tokens__"))return Promise.reject("Error: cannot access secured refferences use  instance.User() instead.");void 0===t.live&&(t.live=!0),this.executing&&this.cancel();const{page:e,limit:r}=t;e&&"number"==typeof e&&(this.page=e),r&&"number"==typeof r&&(this.limit=r),"string"==typeof t.searchString&&(this.searchString=t.searchString);let n=this.stripNonQuery(Ui(this));if(n.searchString&&"string"==typeof n.searchString||delete n.searchString,n.searchString){console.log(n.searchString),n.searchString.split(" ").every((t=>""==t))&&delete n.searchString,n.searchString.length||delete n.searchString}if(this.unsubscribe(),this.listening=!1,1==t.live?(this.#i=g(),n.subscriptionKey=this.#i,n.live=!0,this.createWS()):(this.ws=null,this.#i=null),n.filters&&et(n.filters)&&Object.entries(n.filters).length){let t=[];for(const e of Object.entries(n.filters)){let r=e[0],n=e[1];if(r.includes("[")||r.includes("]")){let e=r.indexOf("["),i=r.indexOf("]");if(-1==e||-1==i)throw new Error("Filter must be enclosed with []");let o=r.substring(e+1,i),s=r.substring(0,e);if(!to.includes(o))throw new Error("Invalid filter");if("in"==o&&!Array.isArray(n))throw new Error("Invalid filter");if("between"==o&&!Array.isArray(n))throw new Error("Invalid filter");o.startsWith("not")?t.push([s,o.substring(2).toLowerCase(),n]):t.push([s,o,n])}else Array.isArray(n)?t.push([r,"in",n]):t.push([r,"==",n])}n.filters=t}else n.filters=[];if(n.sorts&&et(n.sorts)&&Object.entries(n.sorts).length){let t=[];for(const e of Object.entries(n.sorts)){let r=e[0],n=e[1];"ASC"==n?t.push([r,!0]):"DESC"==n&&t.push([r,!1])}n.sorts=t,console.log(t)}this.controller=new AbortController,this.signal=this.controller.signal,this.signal.onabort=()=>{Promise.reject("Query Cancelled")},this.executing=!0;let i=await this.http.post("lenDB",{signal:this.signal,body:JSON.stringify(n)}).json(),o=i?.data;return o&&Array.isArray(o)&&(o=o.map((t=>Ki(t)))),this.#r=o,this.#n=i.count,this.#t.set(o),this.#e.set(i?.count),i.data=o,Promise.resolve(i)}catch(t){return this.executing=!1,this.listening=!1,this.ws=null,Promise.reject(t)}}cancel(){return this.controller&&(this.controller.abort(),this.executing=!1),this}}class Yi{callbacks=[];add=null;update=null;destroy=null;initial=null;onAdd(t){this.add=t}onInitial(t){this.initial=t}onUpdate(t){this.update=t}onDestroy(t){this.destroy=t}getEvent(t){return"add"==t?this.add:"update"==t?this.update:"destroy"==t?this.destroy:"initial"==t?this.initial:void 0}}const to=["eq","gt","gte","lt","lte","like","in","has","notHas","contains","notContains","notLike","between","notIn","notBetween","matches","notEq","notMatches","!eq","!has","!contains","!like","!between","!in","!matches"];var eo=re,ro=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},no=function(t){return this.__data__.has(t)};function io(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new eo;++e<r;)this.add(t[e])}io.prototype.add=io.prototype.push=ro,io.prototype.has=no;var oo=io,so=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},ao=function(t,e){return t.has(e)};var co=function(t,e,r,n,i,o){var s=1&r,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var l=-1,f=!0,p=2&r?new oo:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var d=t[l],y=e[l];if(n)var v=s?n(y,d,l,e,t,o):n(d,y,l,t,e,o);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!so(e,(function(t,e){if(!ao(p,e)&&(d===t||i(d,t,r,n,o)))return p.push(e)}))){f=!1;break}}else if(d!==y&&!i(d,y,r,n,o)){f=!1;break}}return o.delete(t),o.delete(e),f};var uo=Cn,ho=b,lo=co,fo=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},po=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},yo=q?q.prototype:void 0,vo=yo?yo.valueOf:void 0;var go=function(t,e,r,n,i,o,s){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new uo(t),new uo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ho(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=fo;case"[object Set]":var c=1&n;if(a||(a=po),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;n|=2,s.set(t,e);var h=lo(a(t),a(e),n,i,o,s);return s.delete(t),h;case"[object Symbol]":if(vo)return vo.call(t)==vo.call(e)}return!1},_o=un,bo=Object.prototype.hasOwnProperty;var wo=pe,mo=co,xo=go,So=function(t,e,r,n,i,o){var s=1&r,a=_o(t),c=a.length;if(c!=_o(e).length&&!s)return!1;for(var u=c;u--;){var h=a[u];if(!(s?h in e:bo.call(e,h)))return!1}var l=o.get(t),f=o.get(e);if(l&&f)return l==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=s;++u<c;){var y=t[h=a[u]],v=e[h];if(n)var g=s?n(v,y,h,e,t,o):n(y,v,h,t,e,o);if(!(void 0===g?y===v||i(y,v,r,n,o):g)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p},jo=An,ko=He,Bo=Te.exports,Ao=Qe,Eo="[object Object]",Oo=Object.prototype.hasOwnProperty;var Co=function(t,e,r,n,i,o){var s=ko(t),a=ko(e),c=s?"[object Array]":jo(t),u=a?"[object Array]":jo(e),h=(c="[object Arguments]"==c?Eo:c)==Eo,l=(u="[object Arguments]"==u?Eo:u)==Eo,f=c==u;if(f&&Bo(t)){if(!Bo(e))return!1;s=!0,h=!1}if(f&&!h)return o||(o=new wo),s||Ao(t)?mo(t,e,r,n,i,o):xo(t,e,c,r,n,i,o);if(!(1&r)){var p=h&&Oo.call(t,"__wrapped__"),d=l&&Oo.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;return o||(o=new wo),i(y,v,r,n,o)}}return!!f&&(o||(o=new wo),So(t,e,r,n,i,o))},Do=Be;var Po=function t(e,r,n,i,o){return e===r||(null==e||null==r||!Do(e)&&!Do(r)?e!=e&&r!=r:Co(e,r,n,i,t,o))},Ro=Po;var zo,Ho=function(t,e){return Ro(t,e)},To={},Uo={exports:{}},Mo={exports:{}};Mo.exports=(zo=zo||function(e,r){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==t&&t.crypto&&(n=t.crypto),!n)try{n=require("crypto")}catch(t){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),s={},a=s.lib={},c=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=e!=r?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(i());return new u.init(e,t)}}),h=s.enc={},l=h.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new u.init(r,e/2)}},f=h.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new u.init(r,e)}},p=h.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},d=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,h=e.min(4*c,o);if(c){for(var l=0;l<c;l+=s)this._doProcessBlock(i,l);r=i.splice(0,c),n.sigBytes-=h}return new u.init(r,h)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=d.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new y.HMAC.init(t,r).finalize(e)}}});var y=s.algo={};return s}(Math),zo);var Io={exports:{}};Io.exports=function(t){return n=(r=t).lib,i=n.Base,o=n.WordArray,(s=r.x64={}).Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var i=t[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}}),t;var e,r,n,i,o,s}(Mo.exports);var Fo={exports:{}};Fo.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,r=e.init,n=e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;i<e;i++)n[i>>>2]|=t[i]<<24-i%4*8;r.call(this,n,e)}else r.apply(this,arguments)};n.prototype=e}}(),t.lib.WordArray}(Mo.exports);var No={exports:{}};No.exports=function(t){return function(){var e=t,r=e.lib.WordArray,n=e.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return r.create(n,2*e)}},n.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return r.create(n,2*e)}}}(),t.enc.Utf16}(Mo.exports);var Lo={exports:{}};Lo.exports=function(t){return function(){var e=t,r=e.lib.WordArray;function n(t,e,n){for(var i=[],o=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return r.create(i,o)}e.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return n(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64}(Mo.exports);var qo={exports:{}};qo.exports=function(t){return function(){var e=t,r=e.lib.WordArray;function n(t,e,n){for(var i=[],o=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return r.create(i,o)}e.enc.Base64url={stringify:function(t,e=!0){var r=t.words,n=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<n;c++)o.push(i.charAt(a>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(t,e=!0){var r=t.length,i=e?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var c=t.indexOf(a);-1!==c&&(r=c)}return n(t,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),t.enc.Base64url}(Mo.exports);var Wo={exports:{}};Wo.exports=function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],c=t[e+1],p=t[e+2],d=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],_=t[e+7],b=t[e+8],w=t[e+9],m=t[e+10],x=t[e+11],S=t[e+12],j=t[e+13],k=t[e+14],B=t[e+15],A=o[0],E=o[1],O=o[2],C=o[3];A=u(A,E,O,C,s,7,a[0]),C=u(C,A,E,O,c,12,a[1]),O=u(O,C,A,E,p,17,a[2]),E=u(E,O,C,A,d,22,a[3]),A=u(A,E,O,C,y,7,a[4]),C=u(C,A,E,O,v,12,a[5]),O=u(O,C,A,E,g,17,a[6]),E=u(E,O,C,A,_,22,a[7]),A=u(A,E,O,C,b,7,a[8]),C=u(C,A,E,O,w,12,a[9]),O=u(O,C,A,E,m,17,a[10]),E=u(E,O,C,A,x,22,a[11]),A=u(A,E,O,C,S,7,a[12]),C=u(C,A,E,O,j,12,a[13]),O=u(O,C,A,E,k,17,a[14]),A=h(A,E=u(E,O,C,A,B,22,a[15]),O,C,c,5,a[16]),C=h(C,A,E,O,g,9,a[17]),O=h(O,C,A,E,x,14,a[18]),E=h(E,O,C,A,s,20,a[19]),A=h(A,E,O,C,v,5,a[20]),C=h(C,A,E,O,m,9,a[21]),O=h(O,C,A,E,B,14,a[22]),E=h(E,O,C,A,y,20,a[23]),A=h(A,E,O,C,w,5,a[24]),C=h(C,A,E,O,k,9,a[25]),O=h(O,C,A,E,d,14,a[26]),E=h(E,O,C,A,b,20,a[27]),A=h(A,E,O,C,j,5,a[28]),C=h(C,A,E,O,p,9,a[29]),O=h(O,C,A,E,_,14,a[30]),A=l(A,E=h(E,O,C,A,S,20,a[31]),O,C,v,4,a[32]),C=l(C,A,E,O,b,11,a[33]),O=l(O,C,A,E,x,16,a[34]),E=l(E,O,C,A,k,23,a[35]),A=l(A,E,O,C,c,4,a[36]),C=l(C,A,E,O,y,11,a[37]),O=l(O,C,A,E,_,16,a[38]),E=l(E,O,C,A,m,23,a[39]),A=l(A,E,O,C,j,4,a[40]),C=l(C,A,E,O,s,11,a[41]),O=l(O,C,A,E,d,16,a[42]),E=l(E,O,C,A,g,23,a[43]),A=l(A,E,O,C,w,4,a[44]),C=l(C,A,E,O,S,11,a[45]),O=l(O,C,A,E,B,16,a[46]),A=f(A,E=l(E,O,C,A,p,23,a[47]),O,C,s,6,a[48]),C=f(C,A,E,O,_,10,a[49]),O=f(O,C,A,E,k,15,a[50]),E=f(E,O,C,A,v,21,a[51]),A=f(A,E,O,C,S,6,a[52]),C=f(C,A,E,O,d,10,a[53]),O=f(O,C,A,E,m,15,a[54]),E=f(E,O,C,A,c,21,a[55]),A=f(A,E,O,C,b,6,a[56]),C=f(C,A,E,O,B,10,a[57]),O=f(O,C,A,E,g,15,a[58]),E=f(E,O,C,A,j,21,a[59]),A=f(A,E,O,C,y,6,a[60]),C=f(C,A,E,O,x,10,a[61]),O=f(O,C,A,E,p,15,a[62]),E=f(E,O,C,A,w,21,a[63]),o[0]=o[0]+A|0,o[1]=o[1]+E|0,o[2]=o[2]+O|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var h=c[u];c[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function u(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e}function f(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e}r.MD5=o._createHelper(c),r.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5}(Mo.exports);var Ko={exports:{}};Ko.exports=function(t){return r=(e=t).lib,n=r.WordArray,i=r.Hasher,o=e.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],c=r[4],u=0;u<80;u++){if(u<16)s[u]=0|t[e+u];else{var h=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=h<<1|h>>>31}var l=(n<<5|n>>>27)+c+s[u];l+=u<20?1518500249+(i&o|~i&a):u<40?1859775393+(i^o^a):u<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,c=a,a=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a),t.SHA1;var e,r,n,i,o,s,a}(Mo.exports);var $o={exports:{}};$o.exports=function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var u=[],h=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],h=r[5],l=r[6],f=r[7],p=0;p<64;p++){if(p<16)u[p]=0|t[e+p];else{var d=u[p-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,v=u[p-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[p]=y+u[p-7]+g+u[p-16]}var _=n&i^n&o^i&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&h^~a&l)+c[p]+u[p];f=l,l=h,h=a,a=s+w|0,s=o,o=i,i=n,n=w+(b+_)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+h|0,r[6]=r[6]+l|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});r.SHA256=o._createHelper(h),r.HmacSHA256=o._createHmacHelper(h)}(Math),t.SHA256}(Mo.exports);var Jo={exports:{}};Jo.exports=function(t){return r=(e=t).lib.WordArray,n=e.algo,i=n.SHA256,o=n.SHA224=i.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}}),e.SHA224=i._createHelper(o),e.HmacSHA224=i._createHmacHelper(o),t.SHA224;var e,r,n,i,o}(Mo.exports);var Xo={exports:{}};Xo.exports=function(t){return function(){var e=t,r=e.lib.Hasher,n=e.x64,i=n.Word,o=n.WordArray,s=e.algo;function a(){return i.create.apply(i,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],u=[];!function(){for(var t=0;t<80;t++)u[t]=a()}();var h=s.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],h=r[5],l=r[6],f=r[7],p=n.high,d=n.low,y=i.high,v=i.low,g=o.high,_=o.low,b=s.high,w=s.low,m=a.high,x=a.low,S=h.high,j=h.low,k=l.high,B=l.low,A=f.high,E=f.low,O=p,C=d,D=y,P=v,R=g,z=_,H=b,T=w,U=m,M=x,I=S,F=j,N=k,L=B,q=A,W=E,K=0;K<80;K++){var $,J,X=u[K];if(K<16)J=X.high=0|t[e+2*K],$=X.low=0|t[e+2*K+1];else{var V=u[K-15],G=V.high,Z=V.low,Q=(G>>>1|Z<<31)^(G>>>8|Z<<24)^G>>>7,Y=(Z>>>1|G<<31)^(Z>>>8|G<<24)^(Z>>>7|G<<25),tt=u[K-2],et=tt.high,rt=tt.low,nt=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,it=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),ot=u[K-7],st=ot.high,at=ot.low,ct=u[K-16],ut=ct.high,ht=ct.low;J=(J=(J=Q+st+(($=Y+at)>>>0<Y>>>0?1:0))+nt+(($+=it)>>>0<it>>>0?1:0))+ut+(($+=ht)>>>0<ht>>>0?1:0),X.high=J,X.low=$}var lt,ft=U&I^~U&N,pt=M&F^~M&L,dt=O&D^O&R^D&R,yt=C&P^C&z^P&z,vt=(O>>>28|C<<4)^(O<<30|C>>>2)^(O<<25|C>>>7),gt=(C>>>28|O<<4)^(C<<30|O>>>2)^(C<<25|O>>>7),_t=(U>>>14|M<<18)^(U>>>18|M<<14)^(U<<23|M>>>9),bt=(M>>>14|U<<18)^(M>>>18|U<<14)^(M<<23|U>>>9),wt=c[K],mt=wt.high,xt=wt.low,St=q+_t+((lt=W+bt)>>>0<W>>>0?1:0),jt=gt+yt;q=N,W=L,N=I,L=F,I=U,F=M,U=H+(St=(St=(St=St+ft+((lt+=pt)>>>0<pt>>>0?1:0))+mt+((lt+=xt)>>>0<xt>>>0?1:0))+J+((lt+=$)>>>0<$>>>0?1:0))+((M=T+lt|0)>>>0<T>>>0?1:0)|0,H=R,T=z,R=D,z=P,D=O,P=C,O=St+(vt+dt+(jt>>>0<gt>>>0?1:0))+((C=lt+jt|0)>>>0<lt>>>0?1:0)|0}d=n.low=d+C,n.high=p+O+(d>>>0<C>>>0?1:0),v=i.low=v+P,i.high=y+D+(v>>>0<P>>>0?1:0),_=o.low=_+z,o.high=g+R+(_>>>0<z>>>0?1:0),w=s.low=w+T,s.high=b+H+(w>>>0<T>>>0?1:0),x=a.low=x+M,a.high=m+U+(x>>>0<M>>>0?1:0),j=h.low=j+F,h.high=S+I+(j>>>0<F>>>0?1:0),B=l.low=B+L,l.high=k+N+(B>>>0<L>>>0?1:0),E=f.low=E+W,f.high=A+q+(E>>>0<W>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});e.SHA512=r._createHelper(h),e.HmacSHA512=r._createHmacHelper(h)}(),t.SHA512}(Mo.exports);var Vo={exports:{}};Vo.exports=function(t){return r=(e=t).x64,n=r.Word,i=r.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}}),e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a),t.SHA384;var e,r,n,i,o,s,a}(Mo.exports);var Go={exports:{}};Go.exports=function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.x64.Word,a=r.algo,c=[],u=[],h=[];!function(){for(var t=1,e=0,r=0;r<24;r++){c[t+5*e]=(r+1)*(r+2)/2%64;var n=(2*t+3*e)%5;t=e%5,e=n}for(t=0;t<5;t++)for(e=0;e<5;e++)u[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,f=0;f<7;f++){if(1&i){var p=(1<<f)-1;p<32?l^=1<<p:a^=1<<p-32}128&i?i=i<<1^113:i<<=1}h[o]=s.create(a,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=s.create()}();var f=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(E=r[i]).high^=s,E.low^=o}for(var a=0;a<24;a++){for(var f=0;f<5;f++){for(var p=0,d=0,y=0;y<5;y++)p^=(E=r[f+5*y]).high,d^=E.low;var v=l[f];v.high=p,v.low=d}for(f=0;f<5;f++){var g=l[(f+4)%5],_=l[(f+1)%5],b=_.high,w=_.low;for(p=g.high^(b<<1|w>>>31),d=g.low^(w<<1|b>>>31),y=0;y<5;y++)(E=r[f+5*y]).high^=p,E.low^=d}for(var m=1;m<25;m++){var x=(E=r[m]).high,S=E.low,j=c[m];j<32?(p=x<<j|S>>>32-j,d=S<<j|x>>>32-j):(p=S<<j-32|x>>>64-j,d=x<<j-32|S>>>64-j);var k=l[u[m]];k.high=p,k.low=d}var B=l[0],A=r[0];for(B.high=A.high,B.low=A.low,f=0;f<5;f++)for(y=0;y<5;y++){var E=r[m=f+5*y],O=l[m],C=l[(f+1)%5+5*y],D=l[(f+2)%5+5*y];E.high=O.high^~C.high&D.high,E.low=O.low^~C.low&D.low}E=r[0];var P=h[a];E.high^=P.high,E.low^=P.low}},_doFinalize:function(){var t=this._data,r=t.words;this._nDataBytes;var n=8*t.sigBytes,o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,u=[],h=0;h<c;h++){var l=s[h],f=l.high,p=l.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(f)}return new i.init(u,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});r.SHA3=o._createHelper(f),r.HmacSHA3=o._createHmacHelper(f)}(Math),t.SHA3}(Mo.exports);var Zo={exports:{}};Zo.exports=function(t){
/** @preserve
	(c) 2012 by CÃ©dric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=i.create([0,1518500249,1859775393,2400959708,2840853838]),f=i.create([1352829926,1548603684,1836072691,2053994217,0]),p=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,p,w,m,x,S,j,k,B,A,E=this._hash.words,O=l.words,C=f.words,D=a.words,P=c.words,R=u.words,z=h.words;for(x=o=E[0],S=s=E[1],j=p=E[2],k=w=E[3],B=m=E[4],r=0;r<80;r+=1)A=o+t[e+D[r]]|0,A+=r<16?d(s,p,w)+O[0]:r<32?y(s,p,w)+O[1]:r<48?v(s,p,w)+O[2]:r<64?g(s,p,w)+O[3]:_(s,p,w)+O[4],A=(A=b(A|=0,R[r]))+m|0,o=m,m=w,w=b(p,10),p=s,s=A,A=x+t[e+P[r]]|0,A+=r<16?_(S,j,k)+C[0]:r<32?g(S,j,k)+C[1]:r<48?v(S,j,k)+C[2]:r<64?y(S,j,k)+C[3]:d(S,j,k)+C[4],A=(A=b(A|=0,z[r]))+B|0,x=B,B=k,k=b(j,10),j=S,S=A;A=E[1]+p+k|0,E[1]=E[2]+w+B|0,E[2]=E[3]+m+x|0,E[3]=E[4]+o+S|0,E[4]=E[0]+s+j|0,E[0]=A},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,r){return t^e^r}function y(t,e,r){return t&e|~t&r}function v(t,e,r){return(t|~e)^r}function g(t,e,r){return t&r|e&~r}function _(t,e,r){return t^(e|~r)}function b(t,e){return t<<e|t>>>32-e}r.RIPEMD160=o._createHelper(p),r.HmacRIPEMD160=o._createHmacHelper(p)}(),t.RIPEMD160}(Mo.exports);var Qo={exports:{}};Qo.exports=function(t){var e,r,n;r=(e=t).lib.Base,n=e.enc.Utf8,e.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}})}(Mo.exports);var Yo={exports:{}};Yo.exports=function(t){return r=(e=t).lib,n=r.Base,i=r.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=a.create(r.hasher,t),o=i.create(),s=i.create([1]),c=o.words,u=s.words,h=r.keySize,l=r.iterations;c.length<h;){var f=n.update(e).finalize(s);n.reset();for(var p=f.words,d=p.length,y=f,v=1;v<l;v++){y=n.finalize(y),n.reset();for(var g=y.words,_=0;_<d;_++)p[_]^=g[_]}o.concat(f),u[0]++}return o.sigBytes=4*h,o}}),e.PBKDF2=function(t,e,r){return c.create(r).compute(t,e)},t.PBKDF2;var e,r,n,i,o,s,a,c}(Mo.exports);var ts={exports:{}};ts.exports=function(t){return r=(e=t).lib,n=r.Base,i=r.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,n=this.cfg,o=n.hasher.create(),s=i.create(),a=s.words,c=n.keySize,u=n.iterations;a.length<c;){r&&o.update(r),r=o.update(t).finalize(e),o.reset();for(var h=1;h<u;h++)r=o.finalize(r),o.reset();s.concat(r)}return s.sigBytes=4*c,s}}),e.EvpKDF=function(t,e,r){return a.create(r).compute(t,e)},t.EvpKDF;var e,r,n,i,o,s,a}(Mo.exports);var es={exports:{}};es.exports=function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=r.enc;a.Utf8;var c=a.Base64,u=r.algo.EvpKDF,h=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:g}return function(e){return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}()});n.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=r.mode={},f=n.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=l.CBC=function(){var t=f.extend();function r(t,r,n){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var s=0;s<n;s++)t[r+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;r.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),t.Decryptor=t.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);n.decryptBlock(t,e),r.call(this,t,e,i),this._prevBlock=o}}),t}(),d=(r.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var c=o.create(s,n);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:d}),reset:function(){var t;h.reset.call(this);var e=this.cfg,r=e.iv,n=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=n.createEncryptor:(t=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(n,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4});var y=n.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(r.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;return(r?o.create([1398893684,1701076831]).concat(r).concat(e):e).toString(c)},parse:function(t){var e,r=c.parse(t),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(e=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:e})}},g=n.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),s=i.cfg;return y.create({ciphertext:o,key:r,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),_=(r.kdf={}).OpenSSL={execute:function(t,e,r,n){n||(n=o.random(8));var i=u.create({keySize:e+r}).compute(t,n),s=o.create(i.words.slice(e),4*r);return i.sigBytes=4*e,y.create({key:i,iv:s,salt:n})}},b=n.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:_}),encrypt:function(t,e,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize);n.iv=i.iv;var o=g.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt);return n.iv=i.iv,g.decrypt.call(this,t,e,i.key,n)}})}()}(Mo.exports);var rs={exports:{}};rs.exports=function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function r(t,e,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)t[e+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;r.call(this,t,e,i,n),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);r.call(this,t,e,i,n),this._prevBlock=o}}),e}(),t.mode.CFB}(Mo.exports);var ns={exports:{}};ns.exports=function(t){return t.mode.CTR=(e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)t[e+a]^=s[a]}}),e.Decryptor=r,e),t.mode.CTR;var e,r}(Mo.exports);var is={exports:{}};is.exports=function(t){
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(t){if(255==(t>>24&255)){var e=t>>16&255,r=t>>8&255,n=255&t;255===e?(e=0,255===r?(r=0,255===n?n=0:++n):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=n}else t+=1<<24;return t}function n(t){return 0===(t[0]=r(t[0]))&&(t[1]=r(t[1])),t}var i=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),n(s);var a=s.slice(0);r.encryptBlock(a,0);for(var c=0;c<i;c++)t[e+c]^=a[c]}});return e.Decryptor=i,e}(),t.mode.CTRGladman}(Mo.exports);var os={exports:{}};os.exports=function(t){return t.mode.OFB=(e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}}),e.Decryptor=r,e),t.mode.OFB;var e,r}(Mo.exports);var ss={exports:{}};ss.exports=function(t){return t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e),t.mode.ECB;var e}(Mo.exports);var as={exports:{}};as.exports=function(t){return t.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,i=n-r%n,o=r+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923}(Mo.exports);var cs={exports:{}};cs.exports=function(t){return t.pad.Iso10126={pad:function(e,r){var n=4*r,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126}(Mo.exports);var us={exports:{}};us.exports=function(t){return t.pad.Iso97971={pad:function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971}(Mo.exports);var hs={exports:{}};hs.exports=function(t){return t.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){var e=t.words,r=t.sigBytes-1;for(r=t.sigBytes-1;r>=0;r--)if(e[r>>>2]>>>24-r%4*8&255){t.sigBytes=r+1;break}}},t.pad.ZeroPadding}(Mo.exports);var ls={exports:{}};ls.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(Mo.exports);var fs={exports:{}};fs.exports=function(t){return r=(e=t).lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(t){return t.ciphertext.toString(n)},parse:function(t){var e=n.parse(t);return r.create({ciphertext:e})}},t.format.Hex;var e,r,n}(Mo.exports);var ps={exports:{}};ps.exports=function(t){return function(){var e=t,r=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],c=[],u=[],h=[],l=[],f=[],p=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var d=n^n<<1^n<<2^n<<3^n<<4;d=d>>>8^255&d^99,i[r]=d,o[d]=r;var y=t[r],v=t[y],g=t[v],_=257*t[d]^16843008*d;s[r]=_<<24|_>>>8,a[r]=_<<16|_>>>16,c[r]=_<<8|_>>>24,u[r]=_,_=16843009*g^65537*v^257*y^16843008*r,h[d]=_<<24|_>>>8,l[d]=_<<16|_>>>16,f[d]=_<<8|_>>>24,p[d]=_,r?(r=y^t[t[t[g^y]]],n^=t[t[n]]):r=n=1}}();var d=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=e[s]:(u=o[s-1],s%r?r>6&&s%r==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=d[s/r|0]<<24),o[s]=o[s-r]^u);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(s=n-c,c%4)var u=o[s];else u=o[s-4];a[c]=c<4||s<=4?u:h[i[u>>>24]]^l[i[u>>>16&255]]^f[i[u>>>8&255]]^p[i[255&u]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,c,u,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,h,l,f,p,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var c=this._nRounds,u=t[e]^r[0],h=t[e+1]^r[1],l=t[e+2]^r[2],f=t[e+3]^r[3],p=4,d=1;d<c;d++){var y=n[u>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&f]^r[p++],v=n[h>>>24]^i[l>>>16&255]^o[f>>>8&255]^s[255&u]^r[p++],g=n[l>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&h]^r[p++],_=n[f>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&l]^r[p++];u=y,h=v,l=g,f=_}y=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^r[p++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&u])^r[p++],g=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[p++],_=(a[f>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=_},keySize:8});e.AES=r._createHelper(y)}(),t.AES}(Mo.exports);var ds={exports:{}};ds.exports=function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=s[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var u=i[o]=[],h=c[o];for(r=0;r<24;r++)u[r/6|0]|=e[(a[r]-1+h)%28]<<31-r%6,u[4+(r/6|0)]|=e[28+(a[r+24]-1+h)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var l=this._invSubKeys=[];for(r=0;r<16;r++)l[r]=i[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],f.call(this,4,252645135),f.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),f.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=u[c][((s^i[c])&h[c])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,f.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function p(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}e.DES=i._createHelper(l);var d=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=l.createEncryptor(n.create(e)),this._des2=l.createEncryptor(n.create(r)),this._des3=l.createEncryptor(n.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(d)}(),t.TripleDES}(Mo.exports);var ys={exports:{}};ys.exports=function(t){return function(){var e=t,r=e.lib.StreamCipher,n=e.algo,i=n.RC4=r.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=e[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var c=n[i];n[i]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[r],t[r]=o,n|=t[(t[e]+t[r])%256]<<24-8*i}return this._i=e,this._j=r,n}e.RC4=r._createHelper(i);var s=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});e.RC4Drop=r._createHelper(s)}(),t.RC4}(Mo.exports);var vs={exports:{}};vs.exports=function(t){return function(){var e=t,r=e.lib.StreamCipher,n=e.algo,i=[],o=[],s=[],a=n.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(e){var o=e.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=u>>>16|4294901760&h,f=h<<16|65535&u;for(i[0]^=u,i[1]^=l,i[2]^=h,i[3]^=f,i[4]^=u,i[5]^=l,i[6]^=h,i[7]^=f,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(t,e){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=r._createHelper(a)}(),t.Rabbit}(Mo.exports);var gs={exports:{}};gs.exports=function(t){return function(){var e=t,r=e.lib.StreamCipher,n=e.algo,i=[],o=[],s=[],a=n.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=u>>>16|4294901760&h,f=h<<16|65535&u;for(n[0]^=u,n[1]^=l,n[2]^=h,n[3]^=f,n[4]^=u,n[5]^=l,n[6]^=h,n[7]^=f,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(t,e){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=r._createHelper(a)}(),t.RabbitLegacy}(Mo.exports),Uo.exports=Mo.exports;var _s=t&&t.__assign||function(){return _s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_s.apply(this,arguments)};Object.defineProperty(To,"__esModule",{value:!0}),To.SimpleCrypto=void 0;var bs=Uo.exports,ws=function(){function t(t){if(void 0===t)throw new Error("SimpleCrypto object MUST BE initialised with a SECRET KEY.");this._dataBuffer="",this._encoder=bs.enc.Utf8,this._secret=(0,bs.SHA3)("string"==typeof t?t:t.toString()),this._keySize=256,this._iterations=100}return t.sanitiseData=function(t){if(null==t)throw new Error("There is no data provided. Process halted.");var e="object"==typeof t?JSON.stringify(t):"string"==typeof t||"number"==typeof t||"boolean"==typeof t?t.toString():null;if(null===e)throw new Error("Invalid data type. Only object, string, number and boolean data types are allowed.");return e},t.transform=function(t){if("true"===t.toLowerCase()||"false"===t.toLowerCase())return"true"===t.toLowerCase();try{return JSON.parse(t)}catch(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(t)&&!isNaN(parseFloat(t))?parseFloat(t):t}},Object.defineProperty(t,"encoders",{get:function(){return _s({Default:bs.enc.Utf8},bs.enc)},enumerable:!1,configurable:!0}),t.generateRandom=function(t,e){void 0===t&&(t=128),void 0===e&&(e=!1);var r=bs.lib.WordArray.random(t/8);return e?r:r.toString()},t.generateRandomString=function(e){return void 0===e&&(e=128),t.generateRandom(e,!1)},t.generateRandomWordArray=function(e){return void 0===e&&(e=128),t.generateRandom(e,!0)},t.prototype._decrypt=function(){if(this._dataBuffer.length<=64)throw new Error("Invalid cipher text. Decryption halted.");var e=bs.enc.Hex.parse(this._dataBuffer.substring(0,32)),r=bs.enc.Hex.parse(this._dataBuffer.substring(32,64)),n=this._dataBuffer.substring(64,this._dataBuffer.length-64),i=(0,bs.PBKDF2)(this._secret.toString(),e,{keySize:this._keySize/32,iterations:this._iterations}),o=this._dataBuffer.substring(this._dataBuffer.length-64),s=this._dataBuffer.substring(0,this._dataBuffer.length-64);if(o!=(0,bs.HmacSHA256)(s,i).toString())throw new Error("Invalid encrypted text received. Decryption halted.");var a=bs.AES.decrypt(n,i,{iv:r,padding:bs.pad.Pkcs7,mode:bs.mode.CBC});return t.transform(a.toString(t.encoders.Default))},t.prototype._encrypt=function(){var e=t.generateRandom(128,!0),r=t.generateRandom(128,!0),n=(0,bs.PBKDF2)(this._secret.toString(),e,{keySize:this._keySize/32,iterations:this._iterations}),i=bs.AES.encrypt(this._dataBuffer,n,{iv:r,padding:bs.pad.Pkcs7,mode:bs.mode.CBC}),o=e.toString()+r.toString()+i.toString();return o+(0,bs.HmacSHA256)(o,n).toString()},t.prototype.decrypt=function(t,e,r){var n=this,i=function(t){"boolean"!=typeof t&&n.setEncoder(t)};try{return void 0!==t&&this.update(t),void 0!==e&&i(e),void 0!==r&&i(r),this._decrypt()}catch(t){throw t}},t.prototype.encrypt=function(t){try{return void 0!==t&&this.update(t),this._encrypt()}catch(t){throw t}},t.prototype.decryptObject=function(t){return this.update(t).decrypt()},t.prototype.encryptObject=function(t){return this.update(t).encrypt()},t.prototype.append=function(e){try{return this._dataBuffer=this._dataBuffer+t.sanitiseData(e),this}catch(t){throw t}},t.prototype.update=function(e){try{return this._dataBuffer=t.sanitiseData(e),this}catch(t){throw t}},t.prototype.setEncoder=function(t){return this._encoder=t,this},t.prototype.setSecret=function(t){return this._secret=(0,bs.SHA3)("string"==typeof t?t:t.toString()),this},t}();To.SimpleCrypto=ws;var ms=To.default=ws;class xs{cache=!0;#o;#s;#a;#c=Zi({});emitter;#u;baseUrl;constructor(t,e,r){this.#s=t,this.emitter=r,this.baseUrl=e,window.onstorage=t=>{let e=t.key.startsWith("cache:"+this.baseUrl);this.cache&&e&&(this.#a?null==t.newValue&&(this.#a=null,this.Logout()):this.Authenticate())},r.on("set:client_key",(()=>{}))}#h(){if(this.#a)return this.#u=new ms(this.#a),"cache:"+this.baseUrl+this.#u.encrypt("you got me!");throw new Error("Client key is required when creating secured storage key.")}async Login(t,e){try{if(await this.Logout(),"string"!=typeof t)return Promise.resolve("Invalid username/email format");if("string"!=typeof e)return Promise.resolve("Invalid password format");let r=await this.#s.post("lenDB_Auth",{body:JSON.stringify({username:t,password:e,type:"login"})}).json();if(this.cache){const{data:t,client_key:e}=r;this.#l(),this.#a=e,this.#o=this.#h(),this.emitter.emit("set:client_key",this.#a),localStorage.setItem(this.#o,this.#u.encrypt(r)),this.#c.set(t)}return Promise.resolve(r)}catch(t){return Promise.reject(t)}}isValidEmail(t){String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}#l(){Object.entries(localStorage).map((t=>"string"==typeof t[0]?t[0]:"ignore")).filter((t=>t.startsWith("cache:"+this.baseUrl))).forEach((t=>localStorage.removeItem(t)))}async Register(t){try{if(t){if("string"!=typeof t.username)return Promise.reject("argument username expected to be string");if("string"!=typeof t.password)return Promise.reject("argument password expected to be string");if("string"!=typeof t.email||this.isValidEmail(t.email))return Promise.reject("invalid email");t.type="register";let e=await this.#s.post("lenDB_Auth",{body:JSON.stringify(t)}).json();if(this.cache){const{data:t,client_key:r}=e;console.log(r),this.#a=r,this.#o=this.#h(),this.emitter.emit("set:client_key",this.#a),localStorage.setItem(this.#o,this.#u.encrypt(e)),this.#c.set(t)}return Promise.resolve(e)}return Promise.reject("credentials argument expected")}catch(t){return Promise.reject(t)}}async Logout(){try{this.#l(),this.#c.set({}),this.emitter.emit("remove:client_key"),this.#a=void 0;let t=await this.#s.post("lenDB_Auth",{body:JSON.stringify({type:"logout"})}).json();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async Update(t){try{let e=await this.#s.post("lenDB_Auth",{body:JSON.stringify({type:"update",...t}),credentials:"include"}).json();return this.#c.set(e),Promise.resolve(e)}catch(t){return Promise.reject(t)}}Me(t=!1){return this.cache?t?(this.Authenticate(),this.#c):this.#a?void 0:null:null}async Authenticate(){try{let t=await this.#s.post("lenDB_Auth",{body:JSON.stringify({type:"authenticate"}),credentials:"include"}).json();const{data:e,client_key:r}=t;if(r&&e)if(this.cache){this.#a=r,this.#u=new ms(this.#a);const t="cache:"+this.baseUrl,n=Object.entries(localStorage).find((e=>"string"==typeof e[0]&&e[0].startsWith(t)));if(n){const r=n[0];if("you got me!"===this.#u.decrypt(r.substring(t.length))){const t=localStorage.getItem(r),n=this.#u.decrypt(t);Ho(n,e)||localStorage.setItem(r,this.#u.encrypt(e))}}else await this.Logout();this.emitter.emit("set:client_key",this.#a),this.#c.set(e)}else this.#l();return Promise.resolve(e)}catch(t){return Promise.reject(t)}}}class Ss extends Error{constructor(t,e,r){const n=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}`),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}class js extends Error{constructor(t){super("Request timed out"),this.name="TimeoutError",this.request=t}}const ks=t=>null!==t&&"object"==typeof t,Bs=(...t)=>{for(const e of t)if((!ks(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return Es({},...t)},As=(t={},e={})=>{const r=new globalThis.Headers(t),n=e instanceof globalThis.Headers,i=new globalThis.Headers(e);for(const[t,e]of i.entries())n&&"undefined"===e||void 0===e?r.delete(t):r.set(t,e);return r},Es=(...t)=>{let e={},r={};for(const n of t)if(Array.isArray(n))Array.isArray(e)||(e=[]),e=[...e,...n];else if(ks(n)){for(let[t,r]of Object.entries(n))ks(r)&&t in e&&(r=Es(e[t],r)),e={...e,[t]:r};ks(n.headers)&&(r=As(r,n.headers),e.headers=r)}return e},Os="function"==typeof globalThis.AbortController,Cs="function"==typeof globalThis.ReadableStream,Ds="function"==typeof globalThis.FormData,Ps=["get","post","put","patch","head","delete"],Rs={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},zs=Symbol("stop"),Hs=t=>Ps.includes(t)?t.toUpperCase():t,Ts=[413,429,503],Us={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Ts,maxRetryAfter:Number.POSITIVE_INFINITY},Ms=(t={})=>{if("number"==typeof t)return{...Us,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Us,...t,afterStatusCodes:Ts}};class Is{constructor(t,e={}){var r,n;if(this._retryCount=0,this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:As(this._input.headers,e.headers),hooks:Es({beforeRequest:[],beforeRetry:[],afterResponse:[]},e.hooks),method:Hs(null!==(r=e.method)&&void 0!==r?r:this._input.method),prefixUrl:String(e.prefixUrl||""),retry:Ms(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:null!==(n=e.fetch)&&void 0!==n?n:globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Os&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(Ds&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(t,e){const r=new Is(t,e),n=async()=>{if(r._options.timeout>2147483647)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await r._fetch();for(const e of r._options.hooks.afterResponse){const n=await e(r.request,r._options,r._decorateResponse(t.clone()));n instanceof globalThis.Response&&(t=n)}if(r._decorateResponse(t),!t.ok&&r._options.throwHttpErrors)throw new Ss(t,r.request,r._options);if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!Cs)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(t.clone(),r._options.onDownloadProgress)}return t},i=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(n):n();for(const[t,n]of Object.entries(Rs))i[t]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||n);const o=(await i).clone();if("json"===t){if(204===o.status)return"";if(e.parseJson)return e.parseJson(await o.text())}return o[t]()};return i}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof js)){if(t instanceof Ss){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),2147483647);if(0!==r&&this._retryCount>0){await(async t=>new Promise((e=>{setTimeout(e,t)})))(r);for(const t of this._options.hooks.beforeRetry){if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===zs)return}return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):(async(t,e,r)=>new Promise(((n,i)=>{const o=setTimeout((()=>{e&&e.abort(),i(new js(t))}),r.timeout);r.fetch(t).then(n).catch(i).then((()=>{clearTimeout(o)}))})))(this.request.clone(),this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let n=0;return new globalThis.Response(new globalThis.ReadableStream({async start(i){const o=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function t(){const{done:s,value:a}=await o.read();if(s)i.close();else{if(e){n+=a.byteLength;e({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},a)}i.enqueue(a),await t()}}()}}))}}
/*! MIT License Â© Sindre Sorhus */const Fs=t=>{const e=(e,r)=>Is.create(e,Bs(t,r));for(const r of Ps)e[r]=(e,n)=>Is.create(e,Bs(t,n,{method:r}));return e.create=t=>Fs(Bs(t)),e.extend=e=>Fs(Bs(t,e)),e.stop=zs,e};var Ns=Fs();class Ls{httpSettings;key;file;http;uploadsURL;emitter;constructor(t,e,r,n){const i=localStorage.getItem("lenDB");this.http=r,this.httpSettings=JSON.parse(i),this.file=t,this.emitter=n,this.uploadsURL=e+"/uploads",this.key=g()}async fetch(t){if(t&&!g.isCuid(t)||!t)throw TypeError("Invalid key");try{let e=await this.http.get("uploads/"+t).json();return e.url=this.uploadsURL+"/"+e.url,Promise.resolve(e)}catch(t){return Promise.reject(t)}}async save(){try{if(console.log("saving file"),console.log(this.file),!this.file)return Promise.resolve("file argument must be filled.");let t=`${this.key}-$-${this.file.name}`,e=new File([await this.file.arrayBuffer()],t),r=new FormData;r.append("file",e);let n=await this.http.post("lenDB_upload",{body:r}).json();return n?.url&&(n.url=this.uploadsURL+"/"+n.url),n}catch(t){return Promise.reject(t)}}}var qs="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ws(){throw new Error("setTimeout has not been defined")}function Ks(){throw new Error("clearTimeout has not been defined")}var $s=Ws,Js=Ks;function Xs(t){if($s===setTimeout)return setTimeout(t,0);if(($s===Ws||!$s)&&setTimeout)return $s=setTimeout,setTimeout(t,0);try{return $s(t,0)}catch(e){try{return $s.call(null,t,0)}catch(e){return $s.call(this,t,0)}}}"function"==typeof qs.setTimeout&&($s=setTimeout),"function"==typeof qs.clearTimeout&&(Js=clearTimeout);var Vs,Gs=[],Zs=!1,Qs=-1;function Ys(){Zs&&Vs&&(Zs=!1,Vs.length?Gs=Vs.concat(Gs):Qs=-1,Gs.length&&ta())}function ta(){if(!Zs){var t=Xs(Ys);Zs=!0;for(var e=Gs.length;e;){for(Vs=Gs,Gs=[];++Qs<e;)Vs&&Vs[Qs].run();Qs=-1,e=Gs.length}Vs=null,Zs=!1,function(t){if(Js===clearTimeout)return clearTimeout(t);if((Js===Ks||!Js)&&clearTimeout)return Js=clearTimeout,clearTimeout(t);try{Js(t)}catch(e){try{return Js.call(null,t)}catch(e){return Js.call(this,t)}}}(t)}}function ea(t,e){this.fun=t,this.array=e}ea.prototype.run=function(){this.fun.apply(null,this.array)};function ra(){}var na=ra,ia=ra,oa=ra,sa=ra,aa=ra,ca=ra,ua=ra;var ha=qs.performance||{},la=ha.now||ha.mozNow||ha.msNow||ha.oNow||ha.webkitNow||function(){return(new Date).getTime()};var fa=new Date;var pa={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Gs.push(new ea(t,e)),1!==Gs.length||Zs||Xs(ta)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:na,addListener:ia,once:oa,off:sa,removeListener:aa,removeAllListeners:ca,emit:ua,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*la.call(ha),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-fa)/1e3}};const da=new WeakMap,ya=new WeakMap,va=new WeakMap,ga=Symbol("anyProducer"),_a=Promise.resolve(),ba=Symbol("listenerAdded"),wa=Symbol("listenerRemoved");let ma=!1;function xa(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError("eventName must be a string or a symbol")}function Sa(t){if("function"!=typeof t)throw new TypeError("listener must be a function")}function ja(t,e){const r=ya.get(t);return r.has(e)||r.set(e,new Set),r.get(e)}function ka(t,e){const r="string"==typeof e||"symbol"==typeof e?e:ga,n=va.get(t);return n.has(r)||n.set(r,new Set),n.get(r)}function Ba(t,e){e=Array.isArray(e)?e:[e];let r=!1,n=()=>{},i=[];const o={enqueue(t){i.push(t),n()},finish(){r=!0,n()}};for(const r of e)ka(t,r).add(o);return{async next(){return i?0===i.length?r?(i=void 0,this.next()):(await new Promise((t=>{n=t})),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(r){i=void 0;for(const r of e)ka(t,r).delete(o);return n(),arguments.length>0?{done:!0,value:await r}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Aa(t){if(void 0===t)return Ca;if(!Array.isArray(t))throw new TypeError("`methodNames` must be an array of strings");for(const e of t)if(!Ca.includes(e)){if("string"!=typeof e)throw new TypeError("`methodNames` element must be a string");throw new Error(`${e} is not Emittery method`)}return t}const Ea=t=>t===ba||t===wa;class Oa{static mixin(t,e){return e=Aa(e),r=>{if("function"!=typeof r)throw new TypeError("`target` must be function");for(const t of e)if(void 0!==r.prototype[t])throw new Error(`The property \`${t}\` already exists on \`target\``);Object.defineProperty(r.prototype,t,{enumerable:!1,get:function(){return Object.defineProperty(this,t,{enumerable:!1,value:new Oa}),this[t]}});const n=e=>function(...r){return this[t][e](...r)};for(const t of e)Object.defineProperty(r.prototype,t,{enumerable:!1,value:n(t)});return r}}static get isDebugEnabled(){if("object"!=typeof pa)return ma;const{env:t}=pa||{env:{}};return"emittery"===t.DEBUG||"*"===t.DEBUG||ma}static set isDebugEnabled(t){ma=t}constructor(t={}){da.set(this,new Set),ya.set(this,new Map),va.set(this,new Map),this.debug=t.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,e,r,n)=>{n=JSON.stringify(n),"symbol"==typeof r&&(r=r.toString());const i=new Date,o=`${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}`;console.log(`[${o}][emittery:${t}][${e}] Event Name: ${r}\n\tdata: ${n}`)})}logIfDebugEnabled(t,e,r){(Oa.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,e,r)}on(t,e){Sa(e),t=Array.isArray(t)?t:[t];for(const r of t)xa(r),ja(this,r).add(e),this.logIfDebugEnabled("subscribe",r,void 0),Ea(r)||this.emit(ba,{eventName:r,listener:e});return this.off.bind(this,t,e)}off(t,e){Sa(e),t=Array.isArray(t)?t:[t];for(const r of t)xa(r),ja(this,r).delete(e),this.logIfDebugEnabled("unsubscribe",r,void 0),Ea(r)||this.emit(wa,{eventName:r,listener:e})}once(t){return new Promise((e=>{const r=this.on(t,(t=>{r(),e(t)}))}))}events(t){t=Array.isArray(t)?t:[t];for(const e of t)xa(e);return Ba(this,t)}async emit(t,e){xa(t),this.logIfDebugEnabled("emit",t,e),function(t,e,r){const n=va.get(t);if(n.has(e))for(const t of n.get(e))t.enqueue(r);if(n.has(ga)){const t=Promise.all([e,r]);for(const e of n.get(ga))e.enqueue(t)}}(this,t,e);const r=ja(this,t),n=da.get(this),i=[...r],o=Ea(t)?[]:[...n];await _a,await Promise.all([...i.map((async t=>{if(r.has(t))return t(e)})),...o.map((async r=>{if(n.has(r))return r(t,e)}))])}async emitSerial(t,e){xa(t),this.logIfDebugEnabled("emitSerial",t,e);const r=ja(this,t),n=da.get(this),i=[...r],o=[...n];await _a;for(const t of i)r.has(t)&&await t(e);for(const r of o)n.has(r)&&await r(t,e)}onAny(t){return Sa(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),da.get(this).add(t),this.emit(ba,{listener:t}),this.offAny.bind(this,t)}anyEvent(){return Ba(this)}offAny(t){Sa(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(wa,{listener:t}),da.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(const e of t)if(this.logIfDebugEnabled("clear",e,void 0),"string"==typeof e||"symbol"==typeof e){ja(this,e).clear();const t=ka(this,e);for(const e of t)e.finish();t.clear()}else{da.get(this).clear();for(const t of ya.get(this).values())t.clear();for(const t of va.get(this).values()){for(const e of t)e.finish();t.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let e=0;for(const r of t)if("string"!=typeof r){void 0!==r&&xa(r),e+=da.get(this).size;for(const t of ya.get(this).values())e+=t.size;for(const t of va.get(this).values())e+=t.size}else e+=da.get(this).size+ja(this,r).size+ka(this,r).size+ka(this).size;return e}bindMethods(t,e){if("object"!=typeof t||null===t)throw new TypeError("`target` must be an object");e=Aa(e);for(const r of e){if(void 0!==t[r])throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(t,r,{enumerable:!1,value:this[r].bind(this)})}}}const Ca=Object.getOwnPropertyNames(Oa.prototype).filter((t=>"constructor"!==t));Object.defineProperty(Oa,"listenerAdded",{value:ba,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Oa,"listenerRemoved",{value:wa,writable:!1,enumerable:!0,configurable:!1});var Da=Oa;class Pa{Auth;http;wsURL;baseURL;#f;constructor(t="localhost",e=5757,r=!1){this.baseURL=(r?"https://":"http://")+t+":"+e,this.wsURL=(r?"wss://":"ws://")+t+":"+e,this.http=Ns.create({credentials:"include",prefixUrl:this.baseURL}),this.#f=new Da,this.Auth=new xs(this.http,this.baseURL,this.#f)}Object(t,e){var r;return new(r=$i,class extends r{})(t,e,this.http,this.#f)}Commit(t){return async function(t,e){try{if(Array.isArray(t)){if(t.every((t=>t instanceof $i))){t.some((t=>"load"==t.getOperation()))&&Promise.reject("Error: commit does not support load operation");let r=t.map((t=>t.parse())),n=await e.post("lenDB",{body:JSON.stringify(r)}).json();return t.forEach(((e,r)=>{"destroy"==t[r].getOperation()&&(t[r].clear(),t[r].key=g())})),Promise.resolve(n)}Promise.reject("Error: Invalid argument.")}else Promise.reject("Error: argument must be array")}catch(t){Promise.reject(t)}}(t,this.http)}File(t){return new Ls(t,this.baseURL,this.http,this.#f)}Query(t){return new Qi(t,this.http,this.wsURL,this.#f)}}export{Pa as default};
