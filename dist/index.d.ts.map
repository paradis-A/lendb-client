{"mappings":"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","sources":["lib/lib/core/normalize.ts","lib/lib/core/object.ts","lib/lib/core/auth.ts","lib/lib/core/ptimeout.ts","lib/lib/core/pwaitfor.ts","lib/lib/core/query.ts","lib/lib/core/singular.ts","lib/lib/core/file.ts","lib/lib/core/commit.ts","lib/lib/index.ts","lib/index.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,"import Object from \"./core/object\";\r\nimport Query from \"./core/query\";\r\nimport Auth from \"./core/auth\";\r\nimport Singular from \"./core/singular\";\r\nimport LenFile from \"./core/file\";\r\nimport Commit from \"./core/commit\"\r\nimport Emittery from \"emittery\";\r\nimport axios, {AxiosInstance} from \"axios/dist/axios.min.js\"\r\nexport default class LenDB {\r\n    readonly Auth: Auth;\r\n    readonly http: AxiosInstance\r\n    readonly wsURL: string\r\n    private baseURL: string\r\n    readonly #Emitter: Emittery\r\n    //if has client id but no cache then\r\n    //if has client_id but invalid\r\n    constructor(\r\n        host: string = \"localhost\",\r\n        port: number = 5757,\r\n        secure = false\r\n    ) {\r\n        this.baseURL = (secure ? \"https://\" : \"http://\") + host + \":\" + port\r\n        this.wsURL = (secure ? \"wss://\" : \"ws://\") + host + \":\" + port\r\n        this.http = axios.create({baseURL:this.baseURL , withCredentials: true,maxBodyLength: Infinity,maxContentLength:Infinity})\r\n        this.#Emitter = new Emittery()\r\n        this.Auth = new Auth(this.http,this.baseURL,this.#Emitter);\r\n    }\r\n    \r\n    Object<T>(ref: string, key?: string): Object {\r\n        function IdentifiableSubclass<Tbase extends Base>(SuperClass: Constructor<Tbase>) {\r\n            class C extends (<Constructor<Base>>SuperClass) {\r\n            }\r\n            return <Constructor<T & Tbase>>C;\r\n        }\r\n        const ObjectWrapper = IdentifiableSubclass(Object)\r\n        return new ObjectWrapper(ref,key,this.http,this.#Emitter)\r\n    }\r\n\r\n    Singular(path: string){\r\n        \r\n    }\r\n\r\n    Commit(data: Object[]){\r\n        return Commit(data,this.http)\r\n    }\r\n\r\n    // File(file: File) {\r\n    //     return new LenFile(file,this.baseURL,this.http,this.#Emitter);\r\n    // }\r\n    \r\n    Query<T>(ref: string) {\r\n        return new Query<T>(ref,this.http,this.wsURL,this.#Emitter,this.Auth);\r\n    }\r\n}\r\n\r\ninterface Constructor<T> {\r\n    new (...args): T;\r\n}\r\n\r\ninterface Base {\r\n}"],"names":[],"version":3,"file":"index.d.ts.map","sourceRoot":"../"}